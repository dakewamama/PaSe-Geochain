import chai from 'chai';
import { getPayer } from '../../src/utils/inputs';

const { expect } = chai;

describe('inputs utils tests', () => {
  describe('getPayer', () => {
    it('should return undefined if gatekeeperSendsTransaction is true', () => {
      const payer = getPayer({
        gatekeeperSendsTransaction: true,
        payer: 'payer',
        wallet: { address: 'address' },
      });
      expect(payer).to.be.undefined;
    });

    context('when gatekeeperSendsTransaction is false', () => {
      it('should return the payer if payer is defined', () => {
        const payer = getPayer({
          gatekeeperSendsTransaction: false,
          payer: 'payer',
          wallet: { address: 'address' },
        });
        expect(payer).to.equal('payer');
      });

      it('should return the wallet address if payer is undefined', () => {
        const payer = getPayer({
          gatekeeperSendsTransaction: false,
          payer: undefined,
          wallet: { address: 'address' },
        });
        expect(payer).to.equal('address');
      });

      it('should return the undefined if both wallet and payer are undefined', () => {
        const payer = getPayer({
          gatekeeperSendsTransaction: false,
          payer: undefined,
          wallet: undefined,
        });
        expect(payer).to.be.undefined;
      });
    });
  });
});
